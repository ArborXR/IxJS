(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
    typeof define === 'function' && define.amd ? define(['IxAsynciterableOperators'], factory) :
    (factory(global.IxAsynciterableOperators = global.IxAsynciterableOperators || {}));
}(this, (function (exports) {/*
 *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
*****************************************************************************/
function e(a){return this instanceof e?this:new e(a)};const k=a=>"function"===typeof a,l=a=>null!=a&&Object(a)===a;function m(a){return l(a)&&"number"===typeof a.length}function r(a){return null!=a&&k(a[Symbol.iterator])}function aa(a){return null!=a&&Object(a)===a&&"function"===typeof a.subscribe}const ba=a=>l(a)&&k(a.pipe)&&k(a._read)&&"boolean"===typeof a.readable&&l(a._readableState),ca=a=>l(a)&&k(a.end)&&k(a._write)&&"boolean"===typeof a.writable&&l(a._writableState);function u(a){return a}async function x(a){return a};function da(a,b){return"undefined"===typeof b?a:function(c,d){return a.call(b,c,d)}};function ea(a){a=Number(a);return isNaN(a)?0:0!==a&&isFinite(a)?(0<a?1:-1)*Math.floor(Math.abs(a)):a};const fa=Math.pow(2,53)-1;function ha(a,b){if(a.L)throw Error("AsyncSink already ended");if(0<a.F.length){const {resolve:c,reject:d}=a.F.shift();"error"===b.type?d(b.error):c({done:!1,value:b.value})}else a.Y.push(b)}
class ia{constructor(){this.L=!1;this.Y=[];this.F=[]}[Symbol.asyncIterator](){return this}write(a){ha(this,{type:"value",value:a})}error(a){ha(this,{type:"error",error:a})}next(){if(0<this.Y.length){const {type:a,value:b,error:c}=this.Y.shift();return"error"===a?Promise.reject(c):Promise.resolve({done:!1,value:b})}return this.L?Promise.resolve({done:!0}):new Promise((a,b)=>{this.F.push({resolve:a,reject:b})})}end(){for(;0<this.F.length;)this.F.shift().resolve({done:!0});this.L=!0}};class y extends Error{constructor(a="The operation has been aborted"){super(a);Object.setPrototypeOf(this,y.prototype);Error.captureStackTrace(this,this.constructor);this.name="AbortError"}get [Symbol.toStringTag](){return"AbortError"}}function z(a){if(a&&a.aborted)throw new y;}Object.defineProperty(y,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return l(a)&&("AbortError"===a.constructor.name||"AbortError"===a[Symbol.toStringTag])}});let ja,B,C,D,ka;function G(a){return a instanceof H?a:"string"===typeof a?new B([a],x):r(a)||l(a)&&k(a[Symbol.asyncIterator])?new C(a,x):l(a)&&k(a.then)?new D(a,x):aa(a)?new ka(a,x):m(a)?new B(a,x):new B([a],x)};class la{constructor(a,b){this.g=a;this.W=b}[Symbol.asyncIterator](){return this.g[Symbol.asyncIterator](this.W)}}class H{async forEach(a,b,c){const d=c?new la(this,c):this;let f=0;for await(const g of d)await a.call(b,g,f++,c)}A(...a){let b=-1;const c=a.length;let d=this;for(;++b<c;)d=a[b](G(d));return d}}H.prototype[Symbol.toStringTag]="AsyncIterableX";Object.defineProperty(H,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"AsyncIterableX"!==a[Symbol.toStringTag])}});
(function(a){ja=function(b){const c=da(x,void 0);if(r(b)||l(b)&&k(b[Symbol.asyncIterator]))return new C(b,c);if(l(b)&&k(b.then))return new D(b,c);if(aa(b))return new ka(b,c);if(m(b))return new B(b,c);if(l(b)&&!k(b[Symbol.iterator])&&k(b.next))return new C({[Symbol.asyncIterator]:()=>b},c);throw new TypeError("Input type not supported");};B=class extends a{constructor(b,c){super();this.g=b;this.i=c}async*[Symbol.asyncIterator](){let b=0;const c=Math.min(Math.max(ea(this.g.length),0),fa);for(;b<c;)yield await this.i(this.g[b],
b++)}};C=class extends a{constructor(b,c){super();this.g=b;this.i=c}async*[Symbol.asyncIterator](){let b=0;for await(const c of this.g)yield await this.i(c,b++)}};D=class extends a{constructor(b,c){super();this.g=b;this.i=c}async*[Symbol.asyncIterator](){const b=await this.g;yield await this.i(b,0)}};ka=class extends a{constructor(b,c){super();this.sa=b;this.i=c}async*[Symbol.asyncIterator](b){function c(){d.error(new y)}z(b);const d=new ia,f=this.sa.subscribe({next(h){d.write(h)},error(h){d.error(h)},
complete(){d.end()}});b&&b.addEventListener("abort",c);let g=0;try{for(let h;!(h=await d.next()).done;)z(b),yield await this.i(h.value,g++)}finally{b&&b.removeEventListener("abort",c),f.unsubscribe()}}}})(H);
try{(a=>{if(!a){H.prototype.pipe=function(...c){let d=-1;const f=c.length;let g=this,h;for(;++d<f;)if(h=c[d],"function"===typeof h)g=h(G(g));else if(ca(h))return{end:c=!0}=c[d+1]||{},ba(g)?g.A(h,{end:c}):G(g).Aa(b(h)).A(h,{end:c});return g};var b=(c,d=c.wa||{za:!0})=>d}})("object"===typeof window&&"object"===typeof document&&9===document.nodeType)}catch(a){};class I extends H{constructor(a,b){super();this.g=a;this.W=b}withAbort(a){return new I(this.g,a)}[Symbol.asyncIterator](){return this.g[Symbol.asyncIterator](this.W)}}function J(a,b){return b?new I(a,b):a};class ma extends H{constructor(a){super();this.g=a}[Symbol.asyncIterator](a){function b(){c.next().then(h=>{if(h.done)f=Promise.resolve({done:!0}),"waiting"===d.type&&d.Z.resolve(f);else{if("waiting"===d.type){const n=d.Z.resolve;d={type:"batching",values:[]};n({done:h.done,value:[h.value]})}else if("batching"===d.type)d.values.push(h.value);else throw Error(`Unhandled discriminated union member ${d}`);b()}},h=>{g=h;"waiting"===d.type&&d.Z.reject(h)})}z(a);const c=J(this.g,a)[Symbol.asyncIterator]();
let d={type:"batching",values:[]},f=null,g=null;b();return{next(){if(g)return Promise.reject(g);if("batching"===d.type&&0<d.values.length){const h=d.values;d.values=[];return Promise.resolve({done:!1,value:h})}if(f)return f;if("waiting"===d.type)throw Error("Previous `next()` is still in progress");return new Promise((h,n)=>{d={type:"waiting",Z:{resolve:h,reject:n}}})},return(h){return c.return?c.return(h).then(()=>({done:!0})):Promise.resolve({done:!0})}}}};class na extends H{constructor(a,b,c){super();this.g=a;this.h=b;this.va=c}async*[Symbol.asyncIterator](a){z(a);const b=[];let c=0;for await(const d of J(this.g,a)){0===c%this.va&&b.push([]);for(const f of b)f.push(d);0<b.length&&b[0].length===this.h&&(yield b.shift());c++}for(;0<b.length;)yield b.shift()}};class oa{constructor(){this.l=[]}clear(){this.l=[]}get count(){return this.l.length}get(a){return this.l[a]}push(a){this.l.push(a)}done(){}}
class pa{constructor(a){this.h=0;this.I=a;this.l=new Map}clear(){this.l.clear()}get count(){return this.h}get ga(){return this.I}set ga(a){this.I=a}done(){this.I--}get(a){if(!this.l.has(a))throw Error("Element no longer available in the buffer.");const b=this.l.get(a),c=b.value;0===--b.count&&this.l.delete(a);return c}push(a){this.l.set(this.h++,{value:a,count:this.I})}};class qa extends H{constructor(a){super();this.m=a}async*[Symbol.asyncIterator](a){z(a);a=await this.m(a);let b;for(;!(b=await a.next()).done;)yield b.value}};class K extends H{constructor(a,b){super();this.J=this.ba=null;this.da=!1;this.g=a;this.K=b}[Symbol.asyncIterator](a){z(a);return this._getIterable(0)}async *_getIterable(a=0){--a;let b=!1;const c=this.K;try{do if(++a<c.count)yield c.get(a);else{if(this.da)throw this.ba;null===this.J&&(this.J=this.g.next().then(d=>{this.J=null;d.done||c.push(d.value);return d}));({done:b}=await this.J.catch(d=>{this.ba=d;this.da=!0;throw d;}));b||(yield c.get(a))}while(!b)}finally{c.done()}}}
function ra(a=-1,b){return function(c){return b?new qa(()=>b(ra(a)(c))[Symbol.asyncIterator]()):-1===a?new K(c[Symbol.asyncIterator](),new oa):new K(c[Symbol.asyncIterator](),new pa(a))}};async function L(a){"function"===typeof a.return&&await a.return()};class sa extends H{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){z(a);let b=null,c=!1;for(const d of this.g){const f=J(d,a)[Symbol.asyncIterator]();b=null;for(c=!1;;){let g={};try{const {done:h,value:n}=await f.next();if(h){await L(f);break}g=n}catch(h){b=h;c=!0;await L(f);break}yield g}if(!c)break}if(c)throw b;}};function ta(a){return null===a||"object"!==typeof a&&"function"!==typeof a}const ua=new WeakMap;
function N(a){let b;return(new Promise((c,d)=>{b={resolve:c,reject:d};for(const f of a){if(ta(f)){Promise.resolve(f).then(c,d);continue}let g=ua.get(f);void 0===g?(g={C:new Set([b]),$:!1},ua.set(f,g),Promise.resolve(f).then(h=>{for(const {resolve:n}of g.C)n(h);g.C.clear();g.$=!0},h=>{for(const {reject:n}of g.C)n(h);g.C.clear();g.$=!0})):g.$?Promise.resolve(f).then(c,d):g.C.add(b)}})).finally(()=>{for(const c of a)ta(c)||ua.get(c).C.delete(b)})};const va=new Promise(()=>{});function wa(a,b){return a.then(c=>({value:c,index:b}))}
class xa extends H{constructor(a){super();this.v=a}async*[Symbol.asyncIterator](a){z(a);const b=this.v.length,c=Array(b),d=Array(b);let f=!1;const g=Array(b),h=Array(b);let n=b;h.fill(!1);for(let p=0;p<b;p++){const q=J(this.v[p],a)[Symbol.asyncIterator]();c[p]=q;d[p]=wa(q.next(),p)}for(;0<n;){a=N(d);const {value:{value:p,done:q},index:w}=await a;if(q)d[w]=va,n--;else if(g[w]=p,h[w]=!0,d[w]=wa(c[w].next(),w),f||=h.every(u))yield g}}};class ya extends H{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){z(a);for(const b of this.g)for await(const c of J(b,a))yield c}};class za extends H{async*[Symbol.asyncIterator](a){z(a)}};new Promise(()=>{});const Aa="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;class Ba extends H{constructor(a){super();this.ea=a}[Symbol.asyncIterator](){const a=this.ea,b=a.getReader();return Ca(a,b,Da(b))}}class Ea extends Ba{[Symbol.asyncIterator](){var a=this.ea;let b;try{b=a.getReader({mode:"byob"})}catch(c){return super[Symbol.asyncIterator]()}a=Ca(a,b,Fa(b));a.next();return a}}
async function*Ca(a,b,c){let d=!1;try{yield*c}catch(f){(d=!0,b)&&await b.cancel(f)}finally{if(b&&(d||await b.cancel(),a.locked))try{b.closed.catch(()=>{}),b.releaseLock()}catch(f){}}}async function*Da(a){let b;for(;!(b=await a.read()).done;)yield b.value}async function*Fa(a){var b;for(b=yield null;!(b=await Ga(a,b)).done;)b=yield b.value}
async function Ga(a,b){let c;if("number"===typeof b)c=new ArrayBuffer(b);else if(b instanceof ArrayBuffer)b=(c=b).byteLength;else if(b instanceof Aa)b=(c=b).byteLength;else return{done:!0,value:void 0};return await Ha(a,c,0,b)}async function Ha(a,b,c,d){if(c>=d)return{done:!1,value:new Uint8Array(b,0,d)};const {done:f,value:g}=await a.read(new Uint8Array(b,c,d-c));return(c+=g.byteLength)<d&&!f?await Ha(a,g.buffer,c,d):{done:f,value:new Uint8Array(g.buffer,0,c)}}
function Ia(a,b){return b&&"byob"===b.mode?new Ea(a):new Ba(a)};function O(a,b){return new Promise((c,d)=>{function f(){clearTimeout(g);d(new y)}b&&b.aborted&&d(new y);const g=setTimeout(()=>{if(b&&(b.removeEventListener("abort",f),b.aborted)){f();return}c()},a);b&&b.addEventListener("abort",f,{once:!0})})};async function P(a,b){return a===b||"number"===typeof a&&"number"===typeof b&&isNaN(a)&&isNaN(b)};class Ja extends H{constructor(a){super();this.s=a}async*[Symbol.asyncIterator](a){z(a);let b=0;for(;;)await O(this.s,a),yield b++}};const Ka=new Promise(()=>{});function La(a,b){return a.then(c=>({value:c,index:b}))}class Ma extends H{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){z(a);const b=this.g.length,c=Array(b),d=Array(b);let f=b;for(let g=0;g<b;g++){const h=J(this.g[g],a)[Symbol.asyncIterator]();c[g]=h;d[g]=La(h.next(),g)}for(;0<f;){a=N(d);const {value:{done:g,value:h},index:n}=await a;g?(d[n]=Ka,f--):(d[n]=La(c[n].next(),n),yield h)}}}function Na(a,...b){return new Ma([a,...b])};class Oa extends H{constructor(){var a=[Pa];super();this.o=a}async*[Symbol.asyncIterator](a){z(a);for(const b of this.o)yield b}};function Qa(a,b){return a.then(c=>({value:c,index:b}))}class Ra extends H{constructor(a){super();this.v=a}async*[Symbol.asyncIterator](a){z(a);var b=this.v,c=b.length;const d=Array(c);var f=Array(c);for(let n=0;n<c;n++){const p=J(b[n],a)[Symbol.asyncIterator]();d[n]=p;f[n]=Qa(p.next(),n)}a=N(f);const {value:g,index:h}=await a;g.done||(yield g.value);a=d[h];for(b=0;b<c;b++)b!==h&&(f=d[b],f.return&&f.return());for(;!(c=await a.next()).done;)yield c.value}};async function Ua(a,b){z(b);const c=[];for await(const d of J(a,b))c.push(d);return c};class Va extends K{constructor(a){super(a,new pa(0))}[Symbol.asyncIterator](a){z(a);this.K.ga++;return this._getIterable(this.K.count)[Symbol.asyncIterator]()}}function Wa(a){return function(b){return a?new qa(async()=>a(Wa()(b))[Symbol.asyncIterator]()):new Va(b[Symbol.asyncIterator]())}};function Xa(a,b,c=0,d=b.byteLength){const f=a.byteLength;a=new Uint8Array(a.buffer,a.byteOffset,f);b=new Uint8Array(b.buffer,b.byteOffset,Math.min(d,f,b.buffer.byteLength-b.byteOffset));a.set(b,c);return b.byteLength}class Ya{constructor(a){this.g=a}async cancel(){const a=this.g;a&&a.return&&await a.return();this.g=null}}class Za extends Ya{async pull(a){var b=this.g;if(b&&(b=await b.next(a.desiredSize),!b.done))return a.enqueue(b.value);a.close()}}
class $a extends Ya{constructor(a,b={}){super(a);this.type="bytes";this.autoAllocateChunkSize=b.autoAllocateChunkSize;this.xa=new Za(a)}async pull(a){if(!a.byobRequest)return await this.xa.pull(a);if(this.g){const b=a.byobRequest.view,{done:c,value:d}=await this.g.next(b);if(!c){if("number"===typeof d)return a.byobRequest.respond(d);if(ArrayBuffer.isView(d))return d.buffer===b.buffer?a.byobRequest.respondWithNewView(d):a.byobRequest.respond(Xa(b,d))}}a.close()}}
const ab=(()=>{let a,b,c=(f,g)=>{class h extends ReadableStream{[Symbol.asyncIterator](){return Ia(this)[Symbol.asyncIterator]()}}class n extends ReadableStream{[Symbol.asyncIterator](){return Ia(this,{mode:"byob"})[Symbol.asyncIterator]()}}a=n;b=h;c=d;return d(f,g)};const d=(f,g)=>f instanceof $a?new a(f,g):new b(f,g);return(f,g)=>c(f,g)})();function Q(a,b){return b&&"type"in b&&"bytes"===b.type?ab(new $a(a[Symbol.asyncIterator](),b),b):ab(new Za(a[Symbol.asyncIterator]()),b)}H.prototype.tee=function(){return bb(this).tee()};
H.prototype.pipeTo=function(a,b){return bb(this).pipeTo(a,b)};H.prototype.pipeThrough=function(a,b){return bb(this).pipeThrough(a,b)};function bb(a){return a.ha||(a.ha=a.A(Wa(),Q))}H.prototype.toDOMStream=function(a){return a?Q(this,a):Q(this)};const R=()=>{};function cb(a,b,c){return a&&"object"===typeof a?{next:k(a.next)?d=>a.next(d):R,error:k(a.error)?d=>a.error(d):R,complete:k(a.complete)?()=>a.complete():R}:{next:k(a)?a:R,error:k(b)?b:R,complete:k(c)?c:R}};class db extends H{constructor(a,b){super();this.ka=a;this.g=b}async*[Symbol.asyncIterator](a){for(z(a);await this.ka(a);)for await(const b of J(this.g,a))yield b}};class eb extends H{constructor(a){super();this.v=a}async*[Symbol.asyncIterator](a){z(a);const b=this.v.length,c=this.v.map(d=>J(d,a)[Symbol.asyncIterator]());for(;0<b;){const d=Array(b);for(let f=-1;++f<b;){const {value:g,done:h}=await c[f].next();if(h){await Promise.all(c.map(L));return}d[f]=g}yield d}}};class fb extends H{constructor(a,b,c){super();this.g=a;this.i=b;this.G=c}async*[Symbol.asyncIterator](a){z(a);let b=0;for await(const c of J(this.g,a))yield await this.i.call(this.G,c,b++,a)}}function gb(a,b){return function(c){return new fb(c,a,b)}};const hb={},Pa={};class ib extends H{constructor(a,b,c){super();this.source=a;this.bufferSize=b;this.ya=c}async*[Symbol.asyncIterator](a){const b=[];var c=(new Ja(this.ya)).A(gb(()=>hb));c=Na(new ya([this.source,new Oa]),c);for await(const d of J(c,a)){if(d===Pa)break;d!==hb&&b.push(d);if(b.length>=this.bufferSize||b.length&&d===hb)yield b.slice(),b.length=0}b.length&&(yield b)}};class jb extends H{constructor(a,b){super();this.g=a;this.pa=b}async*[Symbol.asyncIterator](a){z(a);let b,c=!1;const d=J(this.g,a)[Symbol.asyncIterator]();for(;;){let f={};try{if(f=await d.next(),f.done){await L(d);break}}catch(g){b=await this.pa(g,a);c=!0;await L(d);break}yield f.value}if(c)for await(const f of J(b,a))yield f}};class kb extends H{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){z(a);for await(const b of J(this.g,a))for await(const c of J(b,a))yield c}};const lb=new Promise(()=>{});function mb(a){return function(b){if(a.aborted&&b instanceof y)return lb;throw b;}}async function*nb(a,b,c,d){for await(const f of J(a,d))z(d),yield{type:c,index:b,value:f};return{type:c,index:b,value:void 0}}
class ob extends H{constructor(a,b,c,d,f){super();this.g=a;this.i=b;this.aa=c;this.fa=d;this.G=f;this.aa=this.fa?1:Math.max(c,0)}async*[Symbol.asyncIterator](a){function b(t){const v=Sa[t-1].next();({[t-1]:t}=E);return v.catch(mb(t.signal))}function c(t){++d;const v=Ta.pop()||d;p&&E[v-1]&&E[v-1].abort();E[v-1]=new AbortController;const F=E[v-1].signal;t=n.call(h,t,f++,F);const A=hc=>{Sa[v-1]=nb(G(hc),v,1,F);return b(v)};M[v]=l(t)&&k(t.then)?t.then(A):A(t)}z(a);let d=0,f=0,g=!1;const h=this.G,n=this.i,
p=this.fa,q=this.aa,w=[],Ta=[],E=Array(isFinite(q)?q:0),Sa=Array(isFinite(q)?q:0);a=nb(this.g,0,0,a);const M=[a.next()];try{for(;;){const {done:t=!1,value:{type:v,value:F,index:A}}=await N(M);if(t){M[A]=lb;switch(v){case 0:g=!0;break;case 1:for(--d,Ta.push(A);d<q&&w.length;)c(w.shift())}if(g&&0===d+w.length)break}else switch(v){case 0:p&&(d=0);d<q?c(F):w.push(F);M[0]=a.next();break;case 1:yield F,M[A]=b(A)}}}finally{E.forEach(t=>{t?.abort()})}}};class pb extends H{constructor(a,b){super();this.g=a;this.X=b}async*[Symbol.asyncIterator](a){z(a);let b=!1,c=()=>{},d=()=>{},f=new Promise((g,h)=>{d=g;c=h});for((async()=>{let g=null;const h=n=>{g=null;d(n);f=new Promise((p,q)=>{d=p;c=q})};a&&a.addEventListener("abort",()=>{b=!0;g&&clearTimeout(g);g=null;c(new y)},{once:!0});try{let n;const p=this.g[Symbol.asyncIterator](a);for(;!b&&!(n=await p.next()).done&&!b;)g&&clearTimeout(g),g=setTimeout(h,this.X,n.value)}catch(n){c(n)}b=!0})();!b;)yield await f}}
;class qb extends H{constructor(a,b){super();this.g=a;this.la=b}async*[Symbol.asyncIterator](a){z(a);let b=1;for await(const c of J(this.g,a))b=2,yield c;1===b&&(yield this.la)}};class rb extends H{constructor(a,b){super();this.g=a;this.s=b}async*[Symbol.asyncIterator](a){z(a);for await(const b of J(this.g,a))await O(this.s,a),yield b}};class sb extends H{constructor(a,b){super();this.g=a;this.s=b}async*[Symbol.asyncIterator](a){z(a);await O(this.s,a);for await(const b of J(this.g,a))yield b}};async function S(a,b,c){for(let d=0,f=a.length;d<f;d++)if(await c(b,a[d]))return d;return-1};class tb extends H{constructor(a,b,c){super();this.g=a;this.u=b;this.j=c}async*[Symbol.asyncIterator](a){z(a);const b=[];for await(const c of J(this.g,a)){const d=await this.u(c,a);-1===await S(b,d,this.j)&&(b.push(d),yield c)}}};class ub extends H{constructor(a,b,c){super();this.g=a;this.u=b;this.j=c}async*[Symbol.asyncIterator](a){z(a);let b,c=!1;for await(const d of J(this.g,a)){const f=await this.u(d,a);let g=!1;c&&(g=await this.j(b,f));c&&g||(c=!0,b=f,yield d)}}};class vb extends H{constructor(a,b){super();this.g=a;this.o=b}async*[Symbol.asyncIterator](a){z(a);for await(const b of J(this.g,a))yield b;for(const b of this.o)yield b}};class wb extends H{constructor(a,b,c){super();this.M=a;this.U=b;this.j=c}async*[Symbol.asyncIterator](a){z(a);const b=[];for await(const c of J(this.U,a))b.push(c);for await(const c of J(this.M,a))-1===await S(b,c,this.j)&&(b.push(c),yield c)}};class xb extends H{constructor(a,b){super();this.g=a;this.i=b}async*[Symbol.asyncIterator](a){z(a);const b=[this.g];for(;0<b.length;){var c=b.shift();for await(const d of J(c,a))c=await this.i(d,a),b.push(c),yield d}}};class yb extends H{constructor(a,b,c){super();this.g=a;this.D=b;this.G=c}async*[Symbol.asyncIterator](a){z(a);let b=0;for await(const c of J(this.g,a))await this.D.call(this.G,c,b++)&&(yield c)}};class zb extends H{constructor(a,b){super();this.g=a;this.ia=b}async*[Symbol.asyncIterator](a){z(a);try{for await(const b of J(this.g,a))yield b}finally{await this.ia()}}};function Ab(a,b=Infinity,c){return function(d){return new ob(d,a,b,!1,c)}};function Bb(a=-1,b=Infinity){a=0>a?Infinity:a;return function(c){return Ab(d=>l(d)&&k(d[Symbol.asyncIterator])?0<a?Bb(a-1)(d):d:[d],b)(c)}};async function Cb(a,b,c,d){const f=new Map;for await(const h of J(a,d)){var g=await b(h,d);a=f.get(g);f.has(g)||(a=[],f.set(g,a));g=await c(h,d);a.push(g)}return f};class Db extends H{constructor(a,b){super();this.key=a;this.g=b}async*[Symbol.asyncIterator](a){z(a);for(const b of this.g)yield b}}class Eb extends H{constructor(a,b,c){super();this.g=a;this.u=b;this.na=c}async*[Symbol.asyncIterator](a){z(a);a=await Cb(this.g,this.u,this.na,a);for(const [b,c]of a)yield new Db(b,c)}};class Fb extends H{constructor(a,b,c,d,f){super();this.R=a;this.N=b;this.S=c;this.O=d;this.T=f}async*[Symbol.asyncIterator](a){z(a);const b=await Cb(this.N,this.O,u,a);for await(const d of J(this.R,a)){var c=await this.S(d,a);c=b.has(c)?b.get(c):new za;yield await this.T(d,ja(c),a)}}};class Gb extends H{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){z(a);for await(const b of J(this.g,a));}};class Hb extends H{constructor(a,b,c,d,f){super();this.R=a;this.N=b;this.S=c;this.O=d;this.T=f}async*[Symbol.asyncIterator](a){z(a);const b=await Cb(this.N,this.O,u,a);for await(const c of J(this.R,a)){const d=await this.S(c,a);if(b.has(d))for(const f of b.get(d))yield await this.T(c,f,a)}}};async function Ib(a,b,c,d){z(d);b=await S(a,b,c);if(-1===b)return!1;a.splice(b,1);return!0}class Jb extends H{constructor(a,b,c){super();this.M=a;this.U=b;this.j=c}async*[Symbol.asyncIterator](a){const b=[];for await(const c of J(this.U,a))b.push(c);for await(const c of J(this.M,a))await Ib(b,c,this.j,a)&&(yield c)}};function T(a,b){return a>b?1:a<b?-1:0};class Kb extends H{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){z(a);a=await Ua(this.g,a);const b=a.length,c=Array(b);for(let d=0;d<b;d++)c[d]=d;c.sort(this._getSorter(a));for(const d of c)yield a[d]}thenBy(a,b=T){return new U(this.g,a,b,!1,this)}thenByDescending(a,b=T){return new U(this.g,a,b,!0,this)}}
class U extends Kb{constructor(a,b,c,d,f){super(a);this.u=b;this.j=c;this.ma=d;this.ta=f}_getSorter(a,b){const c=a.map(this.u),d=this.j,f=this.ta,g=this.ma,h=(n,p)=>{const q=d(c[n],c[p]);return 0===q?b?b(n,p):n-p:g?-q:q};return f?f._getSorter(a,h):h}};class Lb extends H{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){z(a);let b,c=!1;for await(const d of J(this.g,a))c?yield[b,d]:c=!0,b=d}};function Mb(a,b){return c=>{var d=c;for(c=0;c<b;c++)if(d=d[a[c]],"undefined"===typeof d)return;return d}};class Nb extends H{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](a){z(a);if(-1===this.h)for(;;)for await(var b of J(this.g,a))yield b;else for(b=0;b<this.h;b++)for await(const c of J(this.g,a))yield c}};let V;function Ob(a){return a instanceof W?a:"string"===typeof a?new V([a]):r(a)||m(a)?new V(a):new V([a])};class W{forEach(a,b){a=da(a,b);b=0;for(const c of this)a(c,b++)}A(...a){let b=-1;const c=a.length;let d=this;for(;++b<c;)d=a[b](Ob(d));return d}}W.prototype[Symbol.toStringTag]="IterableX";Object.defineProperty(W,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"IterableX"!==a[Symbol.toStringTag])}});
(function(a){V=class extends a{constructor(b){super();this.g=b;this.m=u}*[Symbol.iterator](){let b=0;if(r(this.g))for(var c of this.g)yield this.m(c,b++);else for(c=Math.min(Math.max(ea(this.g.length),0),fa);b<c;)yield this.m(this.g[b],b++)}}})(W);
try{(a=>{if(!a){W.prototype.pipe=function(...c){let d=-1;const f=c.length;let g=this,h;for(;++d<f;)if(h=c[d],"function"===typeof h)g=h(Ob(g));else if(ca(h))return{end:c=!0}=c[d+1]||{},ba(g)?g.A(h,{end:c}):Ob(g).Aa(b(h)).A(h,{end:c});return g};var b=(c,d=c.wa||{za:!0})=>d}})("object"===typeof window&&"object"===typeof document&&9===document.nodeType)}catch(a){};class Pb extends W{constructor(a){super();this.o=a}*[Symbol.iterator](){yield*this.o}};class Qb extends W{constructor(a,b){super();this.g=a;this.h=b}*[Symbol.iterator](){if(-1===this.h)for(;;)for(var a of this.g)yield a;else for(a=0;a<this.h;a++)for(const b of this.g)yield b}};function Rb(a,b=-1){return new Qb(new Pb([a]),b)};class Sb extends H{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){z(a);const b=[];for await(const c of J(this.g,a))b.unshift(c);yield*b}};class Tb extends H{constructor(a,b){super();this.g=a;this.m=b.callback;this.H=b.hasOwnProperty("seed");this.V=b.seed}async*[Symbol.asyncIterator](a){z(a);let b=!1,c=this.V;const d=await Ua(this.g,a);for(let f=d.length-1;0<=f;f--){const g=d[f];(b||=this.H)?(c=await this.m(c,g,f,a),yield c):(c=g,b=!0)}}};class Ub extends H{constructor(a,b){super();this.g=a;this.m=b.callback;this.H=b.hasOwnProperty("seed");this.V=b.seed}async*[Symbol.asyncIterator](a){z(a);let b=0,c=!1,d=this.V;for await(const f of J(this.g,a))(c||=this.H)?(d=await this.m(d,f,b++,a),yield d):(d=f,c=!0,b++);1!==b||this.H||(yield d)}};class Vb extends H{constructor(a){super();this.qa={next(b){return a.next(b)}}}[Symbol.asyncIterator](a){z(a);return this.qa}};class Wb extends H{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](a){z(a);const b=[];for await(const c of J(this.g,a))b.push(c),b.length>this.h&&(yield b.shift())}};class Xb extends H{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](a){z(a);a=J(this.g,a)[Symbol.asyncIterator]();for(var b=this.h;0<b&&!(await a.next()).done;)b--;if(0>=b)for(;!(b=await a.next()).done;)yield b.value}};class Yb extends H{constructor(a,b){super();this.g=a;this.P=b}async*[Symbol.asyncIterator](a){z(a);let b=!1;this.P(a).then(()=>b=!0);for await(const c of J(this.g,a))b&&(yield c)}};class Zb extends H{constructor(a,b){super();this.g=a;this.D=b}async*[Symbol.asyncIterator](a){z(a);let b=!1,c=0;for await(const d of J(this.g,a))b||await this.D(d,c++,a)||(b=!0),b&&(yield d)}};class $b extends H{constructor(a,b,c){super();this.g=a;this.ja=b;this.oa=c}async*[Symbol.asyncIterator](a){z(a);a=J(this.g,a)[Symbol.asyncIterator]();for(var b=this.ja;0<b&&!(await a.next()).done;)b--;let c=this.oa;if(0<c)for(;!(b=await a.next()).done&&(yield b.value,0!==--c););}};class ac extends H{constructor(a,b){super();this.g=a;this.o=b}async*[Symbol.asyncIterator](a){z(a);for(const b of this.o)yield b;for await(const b of J(this.g,a))yield b}};class bc extends H{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](a){z(a);if(0<this.h){const b=[];for await(const c of J(this.g,a))b.length>=this.h&&b.shift(),b.push(c);for(;0<b.length;)yield b.shift()}}};class cc extends H{constructor(a,b){super();this.g=a;this.h=b}async*[Symbol.asyncIterator](a){z(a);let b=this.h;if(0<b)for await(const c of J(this.g,a))if(yield c,0===--b)break}};class dc extends H{constructor(a,b){super();this.g=a;this.P=b}async*[Symbol.asyncIterator](a){z(a);const b=this.P(a).then(()=>{});for(a=J(this.g,a)[Symbol.asyncIterator]();;){var c=a.next();c=await N([b,c]);if(void 0===c||c.done)break;yield c.value}}};class ec extends H{constructor(a,b){super();this.g=a;this.D=b}async*[Symbol.asyncIterator](a){z(a);let b=0;for await(const c of J(this.g,a)){if(!await this.D(c,b++,a))break;yield c}}};class fc extends H{constructor(a,b){super();this.g=a;this.B=b}async*[Symbol.asyncIterator](a){z(a);for(a=J(this.g,a)[Symbol.asyncIterator]();;){let b;try{b=await a.next()}catch(c){if(c instanceof y)throw c;this.B.error&&await this.B.error(c);throw c;}if(b.done){this.B.complete&&await this.B.complete();break}this.B.next&&await this.B.next(b.value);yield b.value}}};class gc extends H{constructor(a,b){super();this.g=a;this.X=b}async*[Symbol.asyncIterator](a){z(a);let b;for await(const c of J(this.g,a))if(a=Date.now(),!b||a-b>this.X)b=a,yield c}};class ic extends H{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){z(a);let b=Date.now();for await(const c of J(this.g,a)){a=Date.now();const d=a-b;b=a;yield{value:c,Ba:d}}}};class X extends Error{constructor(a="Timeout has occurred"){super(a);Object.setPrototypeOf(this,X.prototype);Error.captureStackTrace(this,this.constructor);this.name="TimeoutError"}get [Symbol.toStringTag](){return"TimeoutError"}}Object.defineProperty(X,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return l(a)&&("TimeoutError"===a.constructor.name||"TimeoutError"===a[Symbol.toStringTag])}});
class jc extends H{constructor(a,b){super();this.g=a;this.s=b}async*[Symbol.asyncIterator](a){z(a);const b=J(this.g,a)[Symbol.asyncIterator]();for(;;){const {type:c,value:d}=await N([b.next().then(f=>({type:"value",value:f})),O(this.s,a).then(()=>({type:"error"}))]);if("error"===c)throw new X;if(!d||d.done)break;yield d.value}}};class kc extends H{constructor(a){super();this.g=a}async*[Symbol.asyncIterator](a){z(a);for await(const b of J(this.g,a))yield{time:Date.now(),value:b}}};class lc extends H{constructor(a,b,c){super();this.ra=a;this.ua=b;this.j=c}async*[Symbol.asyncIterator](a){z(a);const b=[];for await(const c of J(this.ra,a))-1===await S(b,c,this.j)&&(b.push(c),yield c);for await(const c of J(this.ua,a))-1===await S(b,c,this.j)&&(b.push(c),yield c)}};const mc=new Promise(()=>{});function Y(a,b){return a.then(c=>({value:c,index:b}))}
class nc extends H{constructor(a,b){super();this.g=a;this.ca=b}async*[Symbol.asyncIterator](a){z(a);const b=this.ca.length;var c=b+1;const d=Array(c);c=Array(c);let f=!1;const g=Array(b),h=Array(b);g.fill(!1);for(let n=0;n<b;n++){const p=J(this.ca[n],a)[Symbol.asyncIterator]();d[n]=p;c[n]=Y(p.next(),n)}a=J(this.g,a)[Symbol.asyncIterator]();d[b]=a;for(c[b]=Y(a.next(),b);;){a=N(c);const {value:{value:n,done:p},index:q}=await a;if(q===b){if(p)break;c[q]=Y(d[q].next(),q);f&&(yield[n,...h])}else p?c[q]=
mc:(h[q]=n,g[q]=!0,f=g.every(u),c[q]=Y(d[q].next(),q))}}};var Z={};Z.BatchAsyncIterable=ma;Z.BufferAsyncIterable=na;Z.CatchWithAsyncIterable=jb;Z.ConcatAllAsyncIterable=kb;Z.DebounceAsyncIterable=pb;Z.DefaultIfEmptyAsyncIterable=qb;Z.DelayAsyncIterable=sb;Z.DelayEachAsyncIterable=rb;Z.DistinctAsyncIterable=tb;Z.DistinctUntilChangedAsyncIterable=ub;Z.EndWithAsyncIterable=vb;Z.ExceptAsyncIterable=wb;Z.ExpandAsyncIterable=xb;Z.FilterAsyncIterable=yb;Z.FinallyAsyncIterable=zb;Z.GroupByAsyncIterable=Eb;Z.GroupJoinAsyncIterable=Fb;Z.GroupedAsyncIterable=Db;
Z.IgnoreElementsAsyncIterable=Gb;Z.IntersectAsyncIterable=Jb;Z.JoinAsyncIterable=Hb;Z.MapAsyncIterable=fb;Z.MemoizeAsyncBuffer=K;Z.OrderedAsyncIterableBaseX=Kb;Z.OrderedAsyncIterableX=U;Z.PairwiseAsyncIterable=Lb;Z.RepeatAsyncIterable=Nb;Z.ReverseAsyncIterable=Sb;Z.ScanAsyncIterable=Ub;Z.ScanRightAsyncIterable=Tb;Z.SkipAsyncIterable=Xb;Z.SkipLastAsyncIterable=Wb;Z.SkipUntilAsyncIterable=Yb;Z.SkipWhileAsyncIterable=Zb;Z.SliceAsyncIterable=$b;Z.StartWithAsyncIterable=ac;Z.TakeAsyncIterable=cc;
Z.TakeLastAsyncIterable=bc;Z.TakeUntilAsyncIterable=dc;Z.TakeWhileAsyncIterable=ec;Z.TapAsyncIterable=fc;Z.ThrottleAsyncIterable=gc;Z.TimeIntervalAsyncIterable=ic;Z.TimeoutAsyncIterable=jc;Z.TimeoutError=X;Z.TimestampAsyncIterable=kc;Z.UnionAsyncIterable=lc;Z.WithAbortAsyncIterable=I;Z.WithLatestFromAsyncIterable=nc;Z.batch=function(){return function(a){return new ma(a)}};Z.buffer=function(a,b){let c=b;null==c&&(c=a);return function(d){return new na(d,a,c)}};
Z.bufferCountOrTime=function(a,b){return function(c){return new ib(c,a,b)}};Z.catchError=function(a){return function(b){return new jb(b,a)}};Z.combineLatestWith=function(...a){return function(b){return new xa([b,...a])}};Z.concatAll=function(){return function(a){return new kb(a)}};Z.concatMap=function(a,b){return function(c){return new ob(c,a,1,!1,b)}};Z.concatWith=function(...a){return function(b){return new ya([b,...a])}};Z.debounce=function(a){return function(b){return new pb(b,a)}};
Z.defaultIfEmpty=function(a){return function(b){return new qb(b,a)}};Z.delay=function(a){return function(b){return new sb(b,a)}};Z.delayEach=function(a){return function(b){return new rb(b,a)}};Z.distinct=function(a){return function(b){const {keySelector:c=x,comparer:d=P}=a||{};return new tb(b,c,d)}};Z.distinctUntilChanged=function(a){return function(b){const {keySelector:c=x,comparer:d=P}=a||{};return new ub(b,c,d)}};Z.doWhile=function(a){return function(b){return new ya([b,new db(a,b)])}};
Z.endWith=function(...a){return function(b){return new vb(b,a)}};Z.except=function(a,b=P){return function(c){return new wb(c,a,b)}};Z.expand=function(a){return function(b){return new xb(b,a)}};Z.filter=function(a,b){return function(c){return new yb(c,a,b)}};Z.finalize=function(a){return function(b){return new zb(b,a)}};Z.flat=Bb;Z.flatMap=Ab;Z.groupBy=function(a,b=x){return function(c){return new Eb(c,a,b)}};Z.groupJoin=function(a,b,c,d){return function(f){return new Fb(f,a,b,c,d)}};
Z.ignoreElements=function(){return function(a){return new Gb(a)}};Z.innerJoin=function(a,b,c,d){return function(f){return new Hb(f,a,b,c,d)}};Z.intersect=function(a,b=P){return function(c){return new Jb(c,a,b)}};Z.map=gb;Z.memoize=ra;Z.mergeAll=function(a=Infinity){return function(b){return G(b).pipe(Ab(c=>c,a))}};Z.mergeWith=function(...a){return function(b){return new Ma([b,...a])}};Z.orderBy=function(a,b=T){return function(c){return new U(c,a,b,!1)}};
Z.orderByDescending=function(a,b=T){return function(c){return new U(c,a,b,!0)}};Z.pairwise=function(){return function(a){return new Lb(a)}};Z.pluck=function(...a){return function(b){return gb(Mb(a,a.length))(b)}};Z.publish=Wa;Z.raceWith=function(...a){return function(b){return new Ra([b,...a])}};Z.repeat=function(a=-1){return function(b){return new Nb(b,a)}};Z.retry=function(a=-1){return function(b){return new sa(Rb(b,a))}};Z.reverse=function(){return function(a){return new Sb(a)}};
Z.scan=function(a){return function(b){return new Ub(b,a)}};Z.scanRight=function(a){return function(b){return new Tb(b,a)}};Z.share=function(a){return function(b){return a?new qa(async c=>(await a(new Vb(b[Symbol.asyncIterator](c)),c))[Symbol.asyncIterator](c)):new Vb(b[Symbol.asyncIterator]())}};Z.skip=function(a){return function(b){return new Xb(b,a)}};Z.skipLast=function(a){return function(b){return new Wb(b,a)}};Z.skipUntil=function(a){return function(b){return new Yb(b,a)}};
Z.skipWhile=function(a){return function(b){return new Zb(b,a)}};Z.slice=function(a,b=Infinity){return function(c){return new $b(c,a,b)}};Z.startWith=function(...a){return function(b){return new ac(b,a)}};Z.switchMap=function(a,b){return function(c){return new ob(c,a,1,!0,b)}};Z.take=function(a){return function(b){return new cc(b,a)}};Z.takeLast=function(a){return function(b){return new bc(b,a)}};Z.takeUntil=function(a){return function(b){return new dc(b,a)}};
Z.takeWhile=function(a){return function(b){return new ec(b,a)}};Z.tap=function(a,b,c){return function(d){return new fc(d,cb(a,b,c))}};Z.thenBy=function(a,b=T){return function(c){return new U(c.g,a,b,!1,c)}};Z.thenByDescending=function(a,b=T){return function(c){return new U(c.g,a,b,!0,c)}};Z.throttle=function(a){return function(b){return new gc(b,a)}};Z.timeInterval=function(){return function(a){return new ic(a)}};Z.timeout=function(a){return function(b){return new jc(b,a)}};Z.timestamp=function(){return function(a){return new kc(a)}};
Z.toDOMStream=function(a){return function(b){return Q(b,a)}};Z.union=function(a,b=P){return function(c){return new lc(c,a,b)}};Z.withAbort=function(a){return function(b){return new I(b,a)}};Z.withLatestFrom=function(...a){return function(b){return new nc(b,a)}};Z.wrapWithAbort=J;Z.zipWith=function(...a){return function(b){return new eb([b,...a])}};e.prototype[Symbol.toStringTag]="__await";Object.defineProperty(e,Symbol.hasInstance,{writable:!0,configurable:!0,value(a){return!(!a||"__await"!==a[Symbol.toStringTag])}});Object.assign(arguments[0],Z);}.bind(this))));

//# sourceMappingURL=Ix.dom.asynciterable.operators.esnext.min.js.map

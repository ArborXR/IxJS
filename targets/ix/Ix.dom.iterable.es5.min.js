(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :
    typeof define === 'function' && define.amd ? define(['IxIterable'], factory) :
    (factory(global.IxIterable = global.IxIterable || {}));
}(this, (function (exports) {/*
 *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
*****************************************************************************/
function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}var ba="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(a==Array.prototype||a==Object.prototype)return a;a[b]=c.value;return a};
function ca(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");}var l=ca(this);function da(a,b){if(b)a:{var c=l;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];if(!(e in c))break a;c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ba(c,a,{configurable:!0,writable:!0,value:b})}}
da("Symbol",function(a){function b(f){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new c(d+(f||"")+"_"+e++,f)}function c(f,g){this.ga=f;ba(this,"description",{configurable:!0,writable:!0,value:g})}if(a)return a;c.prototype.toString=function(){return this.ga};var d="jscomp_symbol_"+(1E9*Math.random()>>>0)+"_",e=0;return b});
da("Symbol.iterator",function(a){if(a)return a;a=Symbol("Symbol.iterator");for(var b="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<b.length;c++){var d=l[b[c]];"function"===typeof d&&"function"!=typeof d.prototype[a]&&ba(d.prototype,a,{configurable:!0,writable:!0,value:function(){return ea(aa(this))}})}return a});da("Symbol.asyncIterator",function(a){return a?a:Symbol("Symbol.asyncIterator")});
function ea(a){a={next:a};a[Symbol.iterator]=function(){return this};return a}function n(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}var fa="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ha;
if("function"==typeof Object.setPrototypeOf)ha=Object.setPrototypeOf;else{var ia;a:{var ja={a:!0},ka={};try{ka.__proto__=ja;ia=ka.a;break a}catch(a){}ia=!1}ha=ia?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var q=ha;
function r(a,b){a.prototype=fa(b.prototype);a.prototype.constructor=a;if(q)q(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.ua=b.prototype}function la(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");}function t(){this.M=!1;this.v=null;this.l=void 0;this.h=1;this.A=this.J=0;this.ca=this.s=null}
function ma(a){if(a.M)throw new TypeError("Generator is already running");a.M=!0}t.prototype.N=function(a){this.l=a};t.prototype.O=function(a){this.s={ba:a,ea:!0};this.h=this.J||this.A};t.prototype.return=function(a){this.s={return:a};this.h=this.A};function w(a,b,c){a.h=c;return{value:b}}function na(a,b,c){b=n(b);var d=b.next();la(d);if(d.done)a.l=d.value,a.h=c;else return a.v=b,w(a,d.value,c)}t.prototype.g=function(a){this.h=a};function oa(a){a.J=2;a.A=3}function pa(a){a.J=0;a.A=2}
function qa(a){a.J=0;var b=a.s.ba;a.s=null;return b}function x(a){a.ca=[a.s];a.J=0;a.A=0}function y(a){var b=a.ca.splice(0)[0];(b=a.s=a.s||b)?b.ea?a.h=a.J||a.A:void 0!=b.g&&a.A<b.g?(a.h=b.g,a.s=null):a.h=a.A:a.h=0}function ra(a){this.j=new t;this.sa=a}ra.prototype.N=function(a){ma(this.j);if(this.j.v)return sa(this,this.j.v.next,a,this.j.N);this.j.N(a);return z(this)};
function ta(a,b){ma(a.j);var c=a.j.v;if(c)return sa(a,"return"in c?c["return"]:function(d){return{value:d,done:!0}},b,a.j.return);a.j.return(b);return z(a)}ra.prototype.O=function(a){ma(this.j);if(this.j.v)return sa(this,this.j.v["throw"],a,this.j.N);this.j.O(a);return z(this)};function sa(a,b,c,d){try{var e=b.call(a.j.v,c);la(e);if(!e.done)return a.j.M=!1,e;var f=e.value}catch(g){return a.j.v=null,a.j.O(g),z(a)}a.j.v=null;d.call(a.j,f);return z(a)}
function z(a){for(;a.j.h;)try{var b=a.sa(a.j);if(b)return a.j.M=!1,{value:b.value,done:!1}}catch(c){a.j.l=void 0,a.j.O(c)}a.j.M=!1;if(a.j.s){b=a.j.s;a.j.s=null;if(b.ea)throw b.ba;return{value:b.return,done:!0}}return{value:void 0,done:!0}}function ua(a){this.next=function(b){return a.N(b)};this.throw=function(b){return a.O(b)};this.return=function(b){return ta(a,b)};this[Symbol.iterator]=function(){return this}}function B(a,b){b=new ua(new ra(b));q&&a.prototype&&q(b,a.prototype);return b}
function va(a){function b(d){return a.next(d)}function c(d){return a.throw(d)}return new Promise(function(d,e){function f(g){g.done?d(g.value):Promise.resolve(g.value).then(b,c).then(f,e)}f(a.next())})}function C(a){return va(new ua(new ra(a)))}function wa(a){var b=a[Symbol.asyncIterator];return void 0!==b?b.call(a):new xa(n(a))}
function xa(a){this[Symbol.asyncIterator]=function(){return this};this[Symbol.iterator]=function(){return a};this.next=function(b){return Promise.resolve(a.next(b))};void 0!==a["throw"]&&(this["throw"]=function(b){return Promise.resolve(a["throw"](b))});void 0!==a["return"]&&(this["return"]=function(b){return Promise.resolve(a["return"](b))})}function D(a,b){this.action=a;this.value=b}function ya(a,b,c,d){this.method=a;this.G=b;this.resolve=c;this.reject=d}
function za(a){this.frame=a;this.next=null}function Aa(){this.T=this.B=null}Aa.prototype.isEmpty=function(){return null===this.B};Aa.prototype.first=function(){if(this.B)return this.B.frame;throw Error("no frames in executionQueue");};function F(a){a.B&&(a.B=a.B.next,a.B||(a.T=null))}Aa.prototype.enqueue=function(a){a=new za(a);this.T?this.T.next=a:this.B=a;this.T=a};
function G(a){this.da=a;this.o=null;this.m=new Aa;this[Symbol.asyncIterator]=function(){return this};var b=this;this.pa=function(c){var d=b.m.first();!0===c.done?(b.o=null,d.method="next",d.G=c.value):(d.resolve({value:c.value,done:!1}),F(b.m));I(b)};this.oa=function(c){Ba(b,c)};this.Y=function(c){Ca(b,c)}}function Da(a,b,c){return new Promise(function(d,e){var f=a.m.isEmpty();a.m.enqueue(new ya(b,c,d,e));f&&I(a)})}G.prototype.next=function(a){return Da(this,"next",a)};
G.prototype.return=function(a){return Da(this,"return",new D(0,a))};G.prototype.throw=function(a){return Da(this,"throw",a)};function I(a){if(!a.m.isEmpty())try{if(a.o){if(!a.o)throw Error("no delegate to perform execution");var b=a.m.first();if(b.method in a.o)try{a.o[b.method](b.G).then(a.pa,a.oa).catch(a.Y)}catch(c){Ba(a,c)}else a.o=null,I(a)}else Ea(a)}catch(c){Ca(a,c)}}
function Ea(a){var b=a.m.first();try{var c=a.da[b.method](b.G);if(c.value instanceof D)switch(c.value.action){case 0:Promise.resolve(c.value.value).then(function(d){b.resolve({value:d,done:c.done});F(a.m);I(a)},function(d){b.reject(d);F(a.m);I(a)}).catch(a.Y);break;case 1:a.o=wa(c.value.value);b.method="next";b.G=void 0;I(a);break;case 2:Promise.resolve(c.value.value).then(function(d){b.method="next";b.G=d;I(a)},function(d){b.method="throw";b.G=d;I(a)}).catch(a.Y);break;default:throw Error("Unrecognized AsyncGeneratorWrapper$ActionEnum");
}else b.resolve(c),F(a.m),I(a)}catch(d){b.reject(d),F(a.m),I(a)}}function Ba(a,b){var c=a.m.first();a.o=null;c.method="throw";c.G=b;I(a)}function Ca(a,b){a.m.isEmpty()||(a.m.first().reject(b),F(a.m));a.o&&"return"in a.o&&(a.o["return"](void 0),a.o=null);a.da["return"](void 0);I(a)}function J(){for(var a=Number(this),b=[],c=a;c<arguments.length;c++)b[c-a]=arguments[c];return b}function Fa(a){return this instanceof Fa?this:new Fa(a)};function K(a){return a}function L(a){return C(function(b){return b.return(a)})};function Ga(a,b){return"undefined"===typeof b?a:function(c,d){return a.call(b,c,d)}};function M(a){return"function"===typeof a}function N(a){return null!=a&&Object(a)===a}function Ha(a){return N(a)&&"number"===typeof a.length}function O(a){return null!=a&&M(a[Symbol.iterator])}function Ia(a){return N(a)&&!M(a[Symbol.iterator])&&M(a.next)}function Ja(a){return null!=a&&Object(a)===a&&"function"===typeof a.subscribe}function Ka(a){return N(a)&&M(a.pipe)&&M(a._read)&&"boolean"===typeof a.readable&&N(a._readableState)}
function La(a){return N(a)&&M(a.end)&&M(a._write)&&"boolean"===typeof a.writable&&N(a._writableState)};function Ma(a){a=Number(a);return isNaN(a)?0:0!==a&&isFinite(a)?(0<a?1:-1)*Math.floor(Math.abs(a)):a};var Na=Math.pow(2,53)-1;var Oa,P;
function Qa(a){function b(c,d){var e=a.call(this)||this;e.i=c;e.H=d;return e}Oa=function(c,d,e){d=void 0===d?K:d;d=Ga(d,e);if(O(c)||Ha(c))return new P(c,d);if(Ia(c))return e={},new P((e[Symbol.iterator]=function(){return c},e),d);throw new TypeError("Input type not supported");};r(b,a);b.prototype[Symbol.iterator]=function d(){var e=this,f,g,h,k,m,u,v;return B(d,function(p){switch(p.h){case 1:f=O(e.i);g=0;if(f){p.g(2);break}h=Math.min(Math.max(Ma(e.i.length),0),Na);case 4:if(!(g<h)){p.g(0);break}k=
e.i[g];return w(p,e.H(k,g++),4);case 2:m=n(e.i),u=m.next();case 7:if(u.done){p.g(0);break}v=u.value;return w(p,e.H(v,g++),8);case 8:u=m.next(),p.g(7)}})};P=b};function Q(){}Q.prototype.forEach=function(a,b){a=Ga(a,b);b=0;for(var c=n(this),d=c.next();!d.done;d=c.next())a(d.value,b++)};Q.prototype.pipe=function(){for(var a=J.apply(0,arguments),b=-1,c=a.length,d=this;++b<c;)d=a[b](Ra(d));return d};Q.prototype[Symbol.toStringTag]="IterableX";Object.defineProperty(Q,Symbol.hasInstance,{writable:!0,configurable:!0,value:function(a){return!(!a||"IterableX"!==a[Symbol.toStringTag])}});Qa(Q);
try{(function(a){a||(Q.prototype.pipe=function(){for(var b=J.apply(0,arguments),c=-1,d=b.length,e=this,f;++c<d;)if(f=b[c],"function"===typeof f)e=f(Ra(e));else if(La(f))return b=b[c+1]||{},b=void 0===b.end?!0:b.end,Ka(e)?f=e.pipe(f,{end:b}):(e=Ra(e),c=e.ta,d=void 0,d=void 0===d?f.na||{ra:!0}:d,f=c.call(e,d).pipe(f,{end:b})),f;return e})})("object"===typeof window&&"object"===typeof document&&9===document.nodeType)}catch(a){};function Ra(a){return a instanceof Q?a:"string"===typeof a?new P([a],K):O(a)||Ha(a)?new P(a,K):new P([a],K)};function Sa(a){"function"===typeof a.return&&a.return()};function R(a){this.i=a}r(R,Q);R.prototype[Symbol.iterator]=function Ta(){var b,c,d=this,e,f,g,h,k,m,u,v;return B(Ta,function(p){switch(p.h){case 1:b=null,c=!1,e=n(d.i),f=e.next();case 2:if(f.done){p.g(4);break}g=f.value;h=g[Symbol.iterator]();b=null;c=!1;case 5:k={};try{m=h.next();u=m.done;v=m.value;if(u){Sa(h);p.g(6);break}k=v}catch(E){b=E;c=!0;Sa(h);p.g(6);break}return w(p,k,5);case 6:if(!c){p.g(4);break}f=e.next();p.g(2);break;case 4:if(c)throw b;p.h=0}})};function Ua(a){this.i=a}r(Ua,Q);Ua.prototype[Symbol.iterator]=function Va(){var b=this,c,d,e;return B(Va,function(f){1==f.h&&(c=n(b.i),d=c.next());if(3!=f.h){if(d.done)return f.g(0);e=d.value;return na(f,e,3)}d=c.next();return f.g(2)})};function Wa(a){this.H=a}r(Wa,Q);Wa.prototype[Symbol.iterator]=function(){return this.H()};function Xa(a){this.H=a}r(Xa,Q);Xa.prototype[Symbol.iterator]=function Ya(){var b=this,c,d,e;return B(Ya,function(f){1==f.h&&(c=n(b.H()),d=c.next());if(3!=f.h){if(d.done)return f.g(0);e=d.value;return w(f,e,3)}d=c.next();return f.g(2)})};function Za(a){return new Xa(a)};function $a(){}r($a,Q);$a.prototype[Symbol.iterator]=function ab(){return B(ab,function(b){b.h=0})};function bb(){return new $a};function cb(a,b,c,d){this.ia=a;this.V=b;this.ja=c;this.la=d}r(cb,Q);cb.prototype[Symbol.iterator]=function db(){var b=this,c;return B(db,function(d){1==d.h&&(c=b.ia);if(3!=d.h)return b.V(c)?w(d,b.la(c),3):d.g(0);c=b.ja(c);return d.g(2)})};function eb(a,b){return a===b||"number"===typeof a&&"number"===typeof b&&isNaN(a)&&isNaN(b)}function fb(a,b){return a>b?1:a<b?-1:0};function gb(a,b,c){var d=[];a=a[Symbol.iterator]();var e=a.next(),f=e.value;if(e.done)throw Error("Sequence contains no elements");e=b(f);for(d.push(f);!(f=a.next()).done;){f=f.value;var g=b(f),h=c(g,e);0===h?d.push(f):0<h&&(d=[f],e=g)}return d};function hb(){return new ib(J.apply(0,arguments))}function ib(a){this.ha=a}r(ib,Q);ib.prototype[Symbol.iterator]=function jb(){var b=this;return B(jb,function(c){return na(c,b.ha,0)})};function kb(a){this.i=a}r(kb,Q);kb.prototype[Symbol.iterator]=function lb(){var b=this,c,d,e,f,g;return B(lb,function(h){switch(h.h){case 1:c=n(b.i),d=c.next();case 2:if(d.done){h.g(0);break}e=d.value;f=e[Symbol.iterator]();case 5:g=void 0;try{g=f.next()}catch(k){h.g(3);break}if(g.done){h.g(3);break}return w(h,g.value,5);case 3:d=c.next(),h.g(2)}})};function mb(a,b){this.$=a;this.C=b}r(mb,Q);mb.prototype[Symbol.iterator]=function nb(){var b=this,c,d;return B(nb,function(e){1==e.h&&(c=b.$,d=b.$+b.C);if(3!=e.h)return c<d?w(e,c,3):e.g(0);c++;return e.g(2)})};function ob(a){var b=[];a=n(a);for(var c=a.next();!c.done;c=a.next())b.push(c.value);return b};function pb(a,b){this.i=a;this.C=b}r(pb,Q);pb.prototype[Symbol.iterator]=function qb(){var b=this,c,d,e,f,g,h;return B(qb,function(k){switch(k.h){case 1:if(-1===b.C){k.g(11);break}c=0;case 4:if(!(c<b.C)){k.g(0);break}d=n(b.i);e=d.next();case 7:if(e.done){c++;k.g(4);break}f=e.value;return w(k,f,8);case 8:e=d.next();k.g(7);break;case 11:g=n(b.i),e=g.next();case 13:if(e.done){k.g(11);break}h=e.value;return w(k,h,14);case 14:e=g.next(),k.g(13)}})};function sb(a){this.D=a}r(sb,Q);sb.prototype[Symbol.iterator]=function tb(){var b=this;return B(tb,function(){throw b.D;})};function S(){this.W=!1;this.X=[];this.L=[]}S.prototype[Symbol.asyncIterator]=function(){return this};S.prototype.write=function(a){ub(this,{type:"value",value:a})};S.prototype.error=function(a){ub(this,{type:"error",error:a})};function ub(a,b){if(a.W)throw Error("AsyncSink already ended");if(0<a.L.length){var c=a.L.shift();a=c.resolve;c=c.reject;"error"===b.type?c(b.error):a({done:!1,value:b.value})}else a.X.push(b)}
S.prototype.next=function(){var a=this;if(0<this.X.length){var b=this.X.shift(),c=b.value,d=b.error;return"error"===b.type?Promise.reject(d):Promise.resolve({done:!1,value:c})}return this.W?Promise.resolve({done:!0}):new Promise(function(e,f){a.L.push({resolve:e,reject:f})})};S.prototype.end=function(){for(;0<this.L.length;)this.L.shift().resolve({done:!0});this.W=!0};function T(a){a=Error.call(this,void 0===a?"The operation has been aborted":a);this.message=a.message;"stack"in a&&(this.stack=a.stack);Object.setPrototypeOf(this,T.prototype);Error.captureStackTrace(this,this.constructor);this.name="AbortError"}r(T,Error);l.Object.defineProperty(T.prototype,Symbol.toStringTag,{configurable:!0,enumerable:!0,get:function(){return"AbortError"}});function vb(a){if(a&&a.aborted)throw new T;}
Object.defineProperty(T,Symbol.hasInstance,{writable:!0,configurable:!0,value:function(a){return N(a)&&("AbortError"===a.constructor.name||"AbortError"===a[Symbol.toStringTag])}});var wb,U,xb,yb,zb;function V(a){this.C=0;this.R=a;this.K=new Map}V.prototype.clear=function(){this.K.clear()};V.prototype.done=function(){this.R--};V.prototype.get=function(a){if(!this.K.has(a))throw Error("Element no longer available in the buffer.");var b=this.K.get(a),c=b.value;0===--b.count&&this.K.delete(a);return c};V.prototype.push=function(a){this.K.set(this.C++,{value:a,count:this.R})};
l.Object.defineProperties(V.prototype,{count:{configurable:!0,enumerable:!0,get:function(){return this.C}},fa:{configurable:!0,enumerable:!0,get:function(){return this.R},set:function(a){this.R=a}}});function Ab(a){this.I=!1;this.i=a;this.u=new V(0)}r(Ab,Q);Ab.prototype.P=function Bb(a){var c,d,e=this,f;return B(Bb,function(g){switch(g.h){case 1:pa(g);case 4:c=!1;d={};if(a>=e.u.count){if(!e.I)try{if(f=e.i.next(),c=!f.done)d=f.value}catch(h){e.D=h,e.I=!0}if(e.I){if(e.D)throw e.D;g.g(2);break}c&&e.u.push(d)}else c=!0;if(!c){g.g(2);break}return w(g,e.u.get(a),6);case 6:a++;g.g(4);break;case 2:x(g),e.u.done(),y(g)}})};Ab.prototype[Symbol.iterator]=function(){this.u.fa++;return this.P(this.u.count)[Symbol.iterator]()};
function Cb(){return function(a){return new Ab(a[Symbol.iterator]())}};function Db(a){return a instanceof W?a:"string"===typeof a?new U([a],L):O(a)||N(a)&&M(a[Symbol.asyncIterator])?new xb(a,L):N(a)&&M(a.then)?new yb(a,L):Ja(a)?new zb(a,L):Ha(a)?new U(a,L):new U([a],L)};function Eb(a,b){this.i=a;this.ma=b}Eb.prototype[Symbol.asyncIterator]=function(){return this.i[Symbol.asyncIterator](this.ma)};function W(){}W.prototype.forEach=function(a,b,c){var d=this,e,f,g,h,k;return C(function(m){1==m.h&&(e=c?new Eb(d,c):d,f=0,g=wa(e));if(5!=m.h)return w(m,g.next(),5);h=m.l;if(h.done)return m.g(0);k=h.value;return w(m,a.call(b,k,f++,c),2)})};W.prototype.pipe=function(){for(var a=J.apply(0,arguments),b=-1,c=a.length,d=this;++b<c;)d=a[b](Db(d));return d};
W.prototype[Symbol.toStringTag]="AsyncIterableX";Object.defineProperty(W,Symbol.hasInstance,{writable:!0,configurable:!0,value:function(a){return!(!a||"AsyncIterableX"!==a[Symbol.toStringTag])}});
(function(a){function b(f,g){var h=a.call(this)||this;h.ka=f;h.F=g;return h}function c(f,g){var h=a.call(this)||this;h.i=f;h.F=g;return h}function d(f,g){var h=a.call(this)||this;h.i=f;h.F=g;return h}function e(f,g){var h=a.call(this)||this;h.i=f;h.F=g;return h}wb=function(f){var g=void 0===g?L:g;g=Ga(g,void 0);if(O(f)||N(f)&&M(f[Symbol.asyncIterator]))return new xb(f,g);if(N(f)&&M(f.then))return new yb(f,g);if(Ja(f))return new zb(f,g);if(Ha(f))return new U(f,g);if(Ia(f)){var h={};return new xb((h[Symbol.asyncIterator]=
function(){return f},h),g)}throw new TypeError("Input type not supported");};r(e,a);e.prototype[Symbol.asyncIterator]=function(){var f=this;return new G(function h(){var k,m,u,v;return B(h,function(p){1==p.h&&(k=0,m=Math.min(Math.max(Ma(f.i.length),0),Na));if(5!=p.h){if(!(k<m))return p.g(0);u=D;v=0;return w(p,new D(2,f.F(f.i[k],k++)),5)}return w(p,new u(v,p.l),2)})}())};U=e;r(d,a);d.prototype[Symbol.asyncIterator]=function(){var f=this;return new G(function h(){var k,m,u,v,p,E;return B(h,function(A){switch(A.h){case 1:k=
0,m=wa(f.i);case 2:return w(A,new D(2,m.next()),5);case 5:u=A.l;if(u.done){A.g(0);break}v=u.value;p=D;E=0;return w(A,new D(2,f.F(v,k++)),7);case 7:return w(A,new p(E,A.l),2)}})}())};xb=d;r(c,a);c.prototype[Symbol.asyncIterator]=function(){var f=this;return new G(function h(){var k,m,u;return B(h,function(v){return 1==v.h?w(v,new D(2,f.i),2):4!=v.h?(k=v.l,m=D,u=0,w(v,new D(2,f.F(k,0)),4)):w(v,new m(u,v.l),0)})}())};yb=c;r(b,a);b.prototype[Symbol.asyncIterator]=function(f){var g=this;return new G(function k(){function m(){u.error(new T)}
var u,v,p,E,A,rb;return B(k,function(H){switch(H.h){case 1:vb(f),u=new S,v=g.ka.subscribe({next:function(Pa){u.write(Pa)},error:function(Pa){u.error(Pa)},complete:function(){u.end()}}),f&&f.addEventListener("abort",m),p=0,pa(H),E=void 0;case 4:return w(H,new D(2,u.next()),7);case 7:if((E=H.l).done){H.g(2);break}vb(f);A=D;rb=0;return w(H,new D(2,g.F(E.value,p++)),9);case 9:return w(H,new A(rb,H.l),4);case 2:x(H),f&&f.removeEventListener("abort",m),v.unsubscribe(),y(H)}})}())};zb=b})(W);
try{(function(a){a||(W.prototype.pipe=function(){for(var b=J.apply(0,arguments),c=-1,d=b.length,e=this,f;++c<d;)if(f=b[c],"function"===typeof f)e=f(Db(e));else if(La(f))return b=b[c+1]||{},b=void 0===b.end?!0:b.end,Ka(e)?f=e.pipe(f,{end:b}):(e=Db(e),c=e.ta,d=void 0,d=void 0===d?f.na||{ra:!0}:d,f=c.call(e,d).pipe(f,{end:b})),f;return e})})("object"===typeof window&&"object"===typeof document&&9===document.nodeType)}catch(a){};function X(a,b){this.S=this.D=null;this.I=!1;this.i=a;this.u=b}r(X,W);X.prototype[Symbol.asyncIterator]=function(a){vb(a);return this.P(0)};
X.prototype.P=function(a){a=void 0===a?0:a;var b=this;return new G(function d(){var e,f,g,h;return B(d,function(k){switch(k.h){case 1:e=a-1,f=!1,g=b.u,pa(k);case 4:if(!(++e<g.count)){k.g(7);break}return w(k,new D(0,g.get(e)),8);case 8:k.g(6);break;case 7:if(b.I)throw b.D;null===b.S&&(b.S=b.i.next().then(function(m){b.S=null;m.done||g.push(m.value);return m}));return w(k,new D(2,b.S.catch(function(m){b.D=m;b.I=!0;throw m;})),9);case 9:h=k.l;if(f=h.done){k.g(6);break}return w(k,new D(0,g.get(e)),6);
case 6:if(!f){k.g(4);break}case 2:x(k),g.done(),y(k)}})}())};function Fb(a){X.call(this,a,new V(0))}r(Fb,X);Fb.prototype[Symbol.asyncIterator]=function(a){vb(a);this.u.fa++;return this.P(this.u.count)[Symbol.asyncIterator]()};function Gb(){return function(a){return new Fb(a[Symbol.asyncIterator]())}};var Hb="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function Y(a){this.aa=a}r(Y,W);Y.prototype[Symbol.asyncIterator]=function(){var a=this.aa,b=a.getReader();return Ib(a,b,Jb(b))};function Kb(){Y.apply(this,arguments)}r(Kb,Y);Kb.prototype[Symbol.asyncIterator]=function(){var a=this.aa;try{var b=a.getReader({mode:"byob"})}catch(c){return Y.prototype[Symbol.asyncIterator].call(this)}a=Ib(a,b,Lb(b));a.next();return a};
function Ib(a,b,c){return new G(function e(){var f,g;return B(e,function(h){switch(h.h){case 1:return f=!1,oa(h),w(h,new D(1,c),3);case 3:x(h);if(!b){h.g(6);break}if(f){h.g(7);break}return w(h,new D(2,b.cancel()),7);case 7:if(a.locked)try{b.closed.catch(function(){}),b.releaseLock()}catch(k){}case 6:y(h);break;case 2:g=qa(h);if(f=!0,b)return w(h,new D(2,b.cancel(g)),3);h.g(3)}})}())}
function Jb(a){return new G(function c(){var d;return B(c,function(e){return 1==e.h?w(e,new D(2,a.read()),4):(d=e.l).done?e.g(0):w(e,new D(0,d.value),1)})}())}function Lb(a){return new G(function c(){var d,e;return B(c,function(f){switch(f.h){case 1:return w(f,new D(0,null),2);case 2:e=f.l;case 3:return w(f,new D(2,Mb(a,e)),5);case 5:if((d=f.l).done){f.g(0);break}return w(f,new D(0,d.value),6);case 6:e=f.l,f.g(3)}})}())}
function Mb(a,b){var c,d;return C(function(e){if(1==e.h){if("number"===typeof b)d=new ArrayBuffer(c=b);else if(b instanceof ArrayBuffer)c=(d=b).byteLength;else if(b instanceof Hb)c=(d=b).byteLength;else return e.return({done:!0,value:void 0});return w(e,Nb(a,d,0,c),2)}return e.return(e.l)})}
function Nb(a,b,c,d){var e,f,g,h;return C(function(k){switch(k.h){case 1:return e=c,e>=d?k.return({done:!1,value:new Uint8Array(b,0,d)}):w(k,a.read(new Uint8Array(b,e,d-e)),2);case 2:f=k.l;g=f.done;h=f.value;if(!((e+=h.byteLength)<d)||g){k.g(3);break}return w(k,Nb(a,h.buffer,e,d),4);case 4:return k.return(k.l);case 3:return k.return({done:g,value:new Uint8Array(h.buffer,0,e)})}})}function Ob(a,b){return b&&"byob"===b.mode?new Kb(a):new Y(a)};function Pb(a){this.i=a}Pb.prototype.cancel=function(){var a=this,b;return C(function(c){if(1==c.h)return(b=a.i)&&b.return?w(c,b.return(),2):c.g(2);a.i=null;c.h=0})};function Qb(a){this.i=a}r(Qb,Pb);Qb.prototype.pull=function(a){var b=this,c,d;return C(function(e){if(1==e.h)return(c=b.i)?w(e,c.next(a.desiredSize),3):e.g(2);if(2!=e.h&&(d=e.l,!d.done))return e.return(a.enqueue(d.value));a.close();e.h=0})};
function Rb(a,b){b=void 0===b?{}:b;this.i=a;this.type="bytes";this.autoAllocateChunkSize=b.autoAllocateChunkSize;this.qa=new Qb(a)}r(Rb,Pb);
Rb.prototype.pull=function(a){var b=this,c,d,e,f,g;return C(function(h){switch(h.h){case 1:if(a.byobRequest){h.g(2);break}return w(h,b.qa.pull(a),3);case 3:return h.return(h.l);case 2:if(!b.i){h.g(4);break}c=a.byobRequest;d=c.view;return w(h,b.i.next(d),5);case 5:if(e=h.l,f=e.done,g=e.value,!f){if("number"===typeof g)return h.return(a.byobRequest.respond(g));if(ArrayBuffer.isView(g)){var k=h.return;if(g.buffer===d.buffer)var m=a.byobRequest.respondWithNewView(g);else{m=a.byobRequest;var u=m.respond;
var v=void 0===v?0:v;var p=void 0===p?g.byteLength:p;var E=d.byteLength,A=new Uint8Array(d.buffer,d.byteOffset,E);p=new Uint8Array(g.buffer,g.byteOffset,Math.min(p,E,g.buffer.byteLength-g.byteOffset));A.set(p,v);m=u.call(m,p.byteLength)}return k.call(h,m)}}case 4:a.close(),h.h=0}})};
var Sb=function(){function a(e,f){return e instanceof Rb?new c(e,f):new d(e,f)}function b(e,f){function g(){return ReadableStream.apply(this,arguments)||this}function h(){return ReadableStream.apply(this,arguments)||this}r(h,ReadableStream);h.prototype[Symbol.asyncIterator]=function(){return Ob(this)[Symbol.asyncIterator]()};r(g,ReadableStream);g.prototype[Symbol.asyncIterator]=function(){return Ob(this,{mode:"byob"})[Symbol.asyncIterator]()};c=g;d=h;b=a;return a(e,f)}var c,d;return function(e,f){return b(e,
f)}}();function Tb(a,b){return b&&"type"in b&&"bytes"===b.type?Sb(new Rb(a[Symbol.asyncIterator](),b),b):Sb(new Qb(a[Symbol.asyncIterator]()),b)}W.prototype.tee=function(){return Ub(this).tee()};W.prototype.pipeTo=function(a,b){return Ub(this).pipeTo(a,b)};W.prototype.pipeThrough=function(a,b){return Ub(this).pipeThrough(a,b)};function Ub(a){return a.U||(a.U=a.pipe(Gb(),Tb))}W.prototype.toDOMStream=function(a){return a?Tb(this,a):Tb(this)};function Vb(a,b){return Tb(wb(a),b)}Q.prototype.tee=function(){return Wb(this).tee()};Q.prototype.pipeTo=function(a,b){return Wb(this).pipeTo(a,b)};Q.prototype.pipeThrough=function(a,b){return Wb(this).pipeThrough(a,b)};function Wb(a){return a.U||(a.U=a.pipe(Cb(),Vb))}function Xb(a){return a?Vb(this,a):Vb(this)}Q.prototype.toDOMStream=Xb;function Yb(a,b){this.V=a;this.i=b}r(Yb,Q);Yb.prototype[Symbol.iterator]=function Zb(){var b=this;return B(Zb,function(c){return b.V()?na(c,b.i,1):c.g(0)})};function $b(a){this.Z=a}r($b,Q);$b.prototype[Symbol.iterator]=function ac(){var b=this,c,d,e,f,g;return B(ac,function(h){1==h.h&&(c=b.Z.length,d=b.Z.map(function(k){return k[Symbol.iterator]()}));if(!(0<c))return h.g(0);e=Array(c);for(f=-1;++f<c;){g=d[f].next();if(g.done)return d.forEach(Sa),h.return(void 0);e[f]=g.value}return w(h,e,2)})};var Z={get FromIterable(){return P},get from(){return Oa}};Z.CatchIterable=R;Z.ConcatIterable=Ua;Z.IterableX=Q;Z.OfIterable=ib;Z.OnErrorResumeNextIterable=kb;Z.ZipIterable=$b;Z._initialize=Qa;Z.as=Ra;Z.average=function(a,b){var c=b||{};b=c.selector;b=void 0===b?K:b;c=c.thisArg;var d=0,e=0;a=n(a);for(var f=a.next();!f.done;f=a.next())d+=b.call(c,f.value),e++;if(0===e)throw Error("Empty collection");return d/e};Z.catchAll=function(a){return new R(a)};Z.catchError=function(){return new R(J.apply(0,arguments))};
Z.concat=function(){return new Ua(J.apply(0,arguments))};Z.count=function(a,b){var c=b||{};b=c.thisArg;c=c.predicate;c=void 0===c?function(){return!0}:c;var d=0;a=n(a);for(var e=a.next();!e.done;e=a.next())c.call(b,e.value,d)&&d++;return d};Z.create=function(a){return new Wa(a)};Z.defer=Za;Z.elementAt=function(a,b){a=n(a);for(var c=a.next();!c.done;c=a.next()){c=c.value;if(0===b)return c;b--}};Z.empty=bb;
Z.every=function(a,b){var c=b.thisArg;b=b.predicate;var d=0;a=n(a);for(var e=a.next();!e.done;e=a.next())if(!b.call(c,e.value,d++))return!1;return!0};Z.find=function(a,b){var c=b.thisArg;b=b.predicate;var d=0;a=n(a);for(var e=a.next();!e.done;e=a.next())if(e=e.value,b.call(c,e,d++))return e};Z.findIndex=function(a,b){var c=b.thisArg;b=b.predicate;var d=0;a=n(a);for(var e=a.next();!e.done;e=a.next())if(b.call(c,e.value,d++))return d;return-1};
Z.first=function(a,b){var c=b||{};b=c.thisArg;c=c.predicate;c=void 0===c?function(){return!0}:c;var d=0;a=n(a);for(var e=a.next();!e.done;e=a.next())if(e=e.value,c.call(b,e,d++))return e};Z.generate=function(a,b,c,d){return new cb(a,b,c,d)};Z.iif=function(a,b,c){c=void 0===c?bb():c;return Za(function(){return a()?b:c})};Z.includes=function(a,b,c){c=void 0===c?0:c;var d=0;Math.abs(c)&&(c=0);a=n(a);for(var e=a.next();!e.done;e=a.next())if(e=e.value,d++>c&&eb(e,b))return!0;return!1};
Z.isEmpty=function(a){for(a=n(a).next();!a.done;)return!1;return!0};Z.last=function(a,b){var c=b||{};b=c.thisArg;c=c.predicate;c=void 0===c?function(){return!0}:c;var d=0,e;a=n(a);for(var f=a.next();!f.done;f=a.next())f=f.value,c.call(b,f,d++)&&(e=f);return e};
Z.max=function(a,b){var c=b||{};b=c.comparer;b=void 0===b?fb:b;c=c.selector;c=void 0===c?K:c;a=a[Symbol.iterator]();var d=a.next();if(d.done)throw Error("Sequence contains no elements");for(var e=c(d.value);!(d=a.next()).done;)d=c(d.value),0<b(d,e)&&(e=d);return e};Z.maxBy=function(a,b){b=b||{};var c=b.comparer;return gb(a,b.selector,void 0===c?fb:c)};
Z.min=function(a,b){var c=b||{};b=c.comparer;b=void 0===b?fb:b;c=c.selector;c=void 0===c?K:c;a=a[Symbol.iterator]();var d=a.next();if(d.done)throw Error("Sequence contains no elements");for(var e=c(d.value);!(d=a.next()).done;)d=c(d.value),0>b(d,e)&&(e=d);return e};Z.minBy=function(a,b){b=b||{};var c=b.comparer,d=void 0===c?fb:c;return gb(a,b.selector,function(e,f){return-d(e,f)})};Z.of=hb;Z.onErrorResumeNext=function(){return new kb(J.apply(0,arguments))};
Z.pipe=function(a){var b=J.apply(1,arguments);return 0===b.length?a instanceof Q?a:Oa(a):function(c){return b.reduce(function(d,e){return e(d)},c)}(a)};Z.range=function(a,b){return new mb(a,b)};
Z.reduce=function(a,b,c){var d="function"===typeof b?2<arguments.length?{callback:b,seed:c}:{callback:b}:b,e=d.seed,f=d.callback;d=d.hasOwnProperty("seed");for(var g=0,h=!1,k=n(a),m=k.next();!m.done;m=k.next())m=m.value,h||(h=d)?e=f(e,m,g++):(e=m,h=!0,g++);if(!d&&!h)throw Error("Sequence contains no elements");return e};
Z.reduceRight=function(a,b,c){var d="function"===typeof b?2<arguments.length?{callback:b,seed:c}:{callback:b}:b,e=d.seed,f=d.callback;d=d.hasOwnProperty("seed");for(var g=ob(a),h=!1,k=g.length-1;0<=k;k--){var m=g[k];h||(h=d)?e=f(e,m,k):(e=m,h=!0)}if(!d&&!h)throw Error("Sequence contains no elements");return e};Z.repeatValue=function(a,b){return new pb(hb(a),void 0===b?-1:b)};
Z.sequenceEqual=function(a,b,c){c=(c||{}).comparer;c=void 0===c?eb:c;a=a[Symbol.iterator]();b=b[Symbol.iterator]();for(var d,e;!(d=a.next()).done;)if((e=b.next()).done||!c(d.value,e.value))return!1;return!!b.next().done};Z.single=function(a,b){var c=b||{};b=c.thisArg;c=c.predicate;c=void 0===c?function(){return!0}:c;var d=!1,e=0;a=n(a);for(var f=a.next();!f.done;f=a.next()){f=f.value;if(d&&c.call(b,f,e++))throw Error("More than one element was found");if(c.call(b,f,e++)){var g=f;d=!0}}return g};
Z.some=function(a,b){var c=b.thisArg;b=b.predicate;var d=0;a=n(a);for(var e=a.next();!e.done;e=a.next())if(b.call(c,e.value,d++))return!0;return!1};Z.sum=function(a,b){var c=b||{};b=c.selector;b=void 0===b?K:b;c=c.thisArg;var d=0;a=n(a);for(var e=a.next();!e.done;e=a.next())d+=b.call(c,e.value);return d};Z.throwError=function(a){return new sb(a)};Z.toArray=ob;Z.toDOMStream=Vb;Z.toDOMStreamProto=Xb;
Z.toMap=function(a,b){var c=b||{};b=c.elementSelector;b=void 0===b?K:b;c=c.keySelector;c=void 0===c?K:c;var d=new Map;a=n(a);for(var e=a.next();!e.done;e=a.next()){var f=e.value;e=b(f);f=c(f);d.set(f,e)}return d};Z.toSet=function(a){var b=new Set;a=n(a);for(var c=a.next();!c.done;c=a.next())b.add(c.value);return b};Z.whileDo=function(a,b){return new Yb(b,a)};Z.zip=function(){return new $b(J.apply(0,arguments))};Fa.prototype[Symbol.toStringTag]="__await";Object.defineProperty(Fa,Symbol.hasInstance,{writable:!0,configurable:!0,value:function(a){return!(!a||"__await"!==a[Symbol.toStringTag])}});Object.assign(arguments[0],Z);}.bind(this))));

//# sourceMappingURL=Ix.dom.iterable.es5.min.js.map
